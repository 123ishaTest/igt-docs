(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{103:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return u}));var i=n(0),r=n.n(i);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=r.a.createContext({}),y=function(e){var t=r.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=y(e.components);return r.a.createElement(c.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=r.a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=y(n),d=i,u=p["".concat(s,".").concat(d)]||p[d]||b[d]||o;return n?r.a.createElement(u,a(a({ref:t},c),{},{components:n})):r.a.createElement(u,a({ref:t},c))}));function u(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,s=new Array(o);s[0]=d;var a={};for(var l in t)hasOwnProperty.call(t,l)&&(a[l]=t[l]);a.originalType=e,a.mdxType="string"==typeof e?e:i,s[1]=a;for(var c=2;c<o;c++)s[c]=n[c];return r.a.createElement.apply(null,s)}return r.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},78:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return s})),n.d(t,"metadata",(function(){return a})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return y}));var i=n(2),r=n(6),o=(n(0),n(103)),s={id:"hotkeys",title:"Hotkeys"},a={unversionedId:"tools/hotkeys",id:"tools/hotkeys",isDocsHomePage:!1,title:"Hotkeys",description:"Navigating Incremental Games can sometimes be a bit of a pain.",source:"@site/docs/tools/hotkeys.md",slug:"/tools/hotkeys",permalink:"/igt-docs/docs/tools/hotkeys",version:"current",sidebar:"docs",previous:{title:"Loot Tables",permalink:"/igt-docs/docs/tools/loot-tables"},next:{title:"Probability",permalink:"/igt-docs/docs/tools/probability"}},l=[{value:"Requirements",id:"requirements",children:[]},{value:"Usage",id:"usage",children:[]},{value:"Implementation",id:"implementation",children:[]},{value:"TODO",id:"todo",children:[]},{value:"See also",id:"see-also",children:[]}],c={rightToc:l};function y(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(i.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Navigating Incremental Games can sometimes be a bit of a pain.\nIn my opinion, a games' difficulty should not come from its UI.\nHotkeys can improve User Experience by allowing the user to navigate tabs or claim resources with a single button press."),Object(o.b)("h2",{id:"requirements"},"Requirements"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Work on all keyboard layouts"),Object(o.b)("li",{parentName:"ul"},"Disable keybinds on request"),Object(o.b)("li",{parentName:"ul"},"Possibility to add a ",Object(o.b)("a",Object(i.a)({parentName:"li"},{href:"/igt-docs/docs/tools/requirements"}),"Requirement")," to a keybind"),Object(o.b)("li",{parentName:"ul"},"Get an overview of all registered keybinds")),Object(o.b)("h2",{id:"usage"},"Usage"),Object(o.b)("pre",null,Object(o.b)("code",Object(i.a)({parentName:"pre"},{className:"language-ts"}),'// Create your first keybind.\nconst keyBind = new KeyBind("shift+x",\n    "Do a thing", () => {\n        console.log("shift + x pressed!");\n        // Additional logic\n    }, KeyEventType.KeyUp\n);\n\n// And register it.\nHotKeys.addKeyBind(keyBind);\n\n// Get a list of descriptions for the registered keybinds.\nHotKeys.getKeyBindDescriptions().forEach(keyBind => {\n    console.log(keyBind.keys) // "shift+x"\n    console.log(keyBind.description) // "Do a thing"\n})\n\n// This callback only triggers if the condition is met.\nconst keyBindWithRequirement = new KeyBind("ctrl+a",\n    "Do another thing", () => {\n        console.log("ctrl + a pressed!");\n        // Additional logic\n    }, new CurrencyRequirement(10, CurrencyType.Money)\n);\nHotKeys.addKeyBind(keyBindWithRequirement);\n\n// Or use a custom condition.\nconst keyBindWithCustomCondition = new CustomConditionKeyBind("x",\n    "Only works on wednesdays", () => {\n        // Perform some logic\n    }, () => {\n        return new Date().getDay() === 3;\n    })\n\n// Manually trigger a callback.\nHotKeys.trigger("ctrl+a");\n')),Object(o.b)("h2",{id:"implementation"},"Implementation"),Object(o.b)("p",null,"I decided to use the ",Object(o.b)("a",Object(i.a)({parentName:"p"},{href:"https://craig.is/killing/mice"}),"Mousetrap library"),".\nIt works very well and handles different keyboard layouts for us automatically!"),Object(o.b)("p",null,"We need to pass the event type to Mousetrap. The following types are supported."),Object(o.b)("pre",null,Object(o.b)("code",Object(i.a)({parentName:"pre"},{className:"language-ts",metastring:'title="src/ig-template/tools/hotkeys/KeyEventType.ts"',title:'"src/ig-template/tools/hotkeys/KeyEventType.ts"'}),'export enum KeyEventType {\n    KeyPress = "keypress",\n    KeyDown = "keydown",\n    KeyUp = "keyup"\n}\n')),Object(o.b)("p",null,"A ",Object(o.b)("inlineCode",{parentName:"p"},"KeyBind")," is a fairly simple data class."),Object(o.b)("pre",null,Object(o.b)("code",Object(i.a)({parentName:"pre"},{className:"language-ts",metastring:'title="src/ig-template/tools/hotkeys/KeyBind.ts"',title:'"src/ig-template/tools/hotkeys/KeyBind.ts"'}),"export class KeyBind {\n    keys: string | string[];\n    description: string;\n    callback: Function;\n    requirement: Requirement;\n    eventType: KeyEventType;\n}\n")),Object(o.b)("p",null,"On top of that a list of keybinds need to be kept such that you can always request a list of them."),Object(o.b)("pre",null,Object(o.b)("code",Object(i.a)({parentName:"pre"},{className:"language-ts",metastring:'title="src/ig-template/tools/hotkeys/HotKeys.ts"',title:'"src/ig-template/tools/hotkeys/HotKeys.ts"'}),"/**\n * Easily add KeyBinds from anywhere in your codebase.\n * Very useful to switch tabs or claim resources!\n */\nexport class HotKeys {\n\n    /**\n     * List of all registered keybinds\n     * @private\n     */\n    private static _keyBinds: KeyBind[] = [];\n\n    /**\n     * Register a keybind with mousetrap, but add the requirement in the callback.\n     */\n    public static addKeyBind(keyBind: KeyBind) {\n        Mousetrap.bind(keyBind.keys, () => {\n            if (keyBind.requirement.isCompleted) {\n                keyBind.callback();\n            }\n        }, keyBind.eventType)\n        this._keyBinds.push(keyBind);\n    }\n\n    /**\n     * Unregister a keybind from mousetrap.\n     */\n    public static removeKeyBind(keys: string | string[], action = KeyEventType.KeyDown) {\n        this._keyBinds = this._keyBinds.filter((keyBind) => keyBind.keys !== keys);\n        Mousetrap.unbind(keys, action);\n    }\n\n    /**\n     * Manyally trigger a callback. Note that the requirement still needs to be completed for it to run.\n     */\n    public static trigger(keys: string, action = KeyEventType.KeyDown) {\n        Mousetrap.trigger(keys, action);\n    }\n\n    /**\n     * Generate a list of all descriptions to show in the UI.\n     */\n    public static getKeyBindDescriptions(): KeyBindDescription[] {\n        return this._keyBinds.map(keyBind => {\n            const keysText: string = (typeof keyBind.keys === 'string') ? keyBind.keys : keyBind.keys.join(\", \");\n\n            return {\n                'keys': keysText,\n                'description': keyBind.description\n            };\n        });\n    }\n\n    /**\n     * Remove all registered keybinds.\n     */\n    public static reset(): void {\n        this._keyBinds = [];\n        Mousetrap.reset();\n    }\n}\n\n")),Object(o.b)("h2",{id:"todo"},"TODO"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Let the player set they own keybinds.")),Object(o.b)("h2",{id:"see-also"},"See also"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(i.a)({parentName:"li"},{href:"https://craig.is/killing/mice"}),"Mousetrap documentation")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(i.a)({parentName:"li"},{href:"https://github.com/123ishaTest/igt-library/blob/master/src/ig-template/tools/hotkeys"}),"src/ig-template/tools/hotkeys/")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(i.a)({parentName:"li"},{href:"https://github.com/123ishaTest/igt-library/blob/master/src/ig-template/tools/hotkeys/HotKeys.ts"}),"src/ig-template/tools/hotkeys/HotKeys.ts")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(i.a)({parentName:"li"},{href:"https://github.com/123ishaTest/igt-library/blob/master/src/ig-template/tools/hotkeys/KeyBind.ts"}),"src/ig-template/tools/hotkeys/KeyBind.ts")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(i.a)({parentName:"li"},{href:"https://github.com/123ishaTest/igt-library/blob/master/src/ig-template/tools/hotkeys/CustomConditionKeyBind.ts"}),"src/ig-template/tools/hotkeys/CustomConditionKeyBind.ts"))))}y.isMDXComponent=!0}}]);